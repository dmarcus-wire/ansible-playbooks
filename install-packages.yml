---
- name: mariadb packages installed and service running
  hosts: all
  
  tasks:
    - name: install packages
      yum:
        name: "{{ packages }}"
      vars: 
          packages: 
          - mariadb-server
          - python3-PyMySQL
      when: ansible_distribution == "Red Hat" 
      
    - name: start MariaDB service
      service:
        name: mariadb-server
        state: started
        enabled: True
        
    - name: verify service status
      shell: 
        cmd: mysql -u root; status
        
    - name: exit service
      shell:
        cmd: exit
...
